# SuperbulletAI Architecture Diagrams

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER BROWSER                         â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Landing    â”‚  â”‚  Auth Pages  â”‚  â”‚   Projects   â”‚      â”‚
â”‚  â”‚    Page     â”‚â†’ â”‚ Login/Signup â”‚â†’ â”‚   Dashboard  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                              â†“               â”‚
â”‚                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚                                     â”‚   IDE Page     â”‚      â”‚
â”‚                                     â”‚  - File Tree   â”‚      â”‚
â”‚                                     â”‚  - Editor Tabs â”‚      â”‚
â”‚                                     â”‚  - Monaco      â”‚      â”‚
â”‚                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚ HTTP Requests
                                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      NEXT.JS SERVER                          â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  API Routes (REST)                    â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚    Auth     â”‚  â”‚  Projects   â”‚  â”‚    Files    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  /register  â”‚  â”‚  /projects  â”‚  â”‚ /files/:id  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   /login    â”‚  â”‚ /projects/:idâ”‚  â”‚   (CRUD)    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚   /verify   â”‚  â”‚   (CRUD)    â”‚  â”‚             â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚            â”‚                â”‚                â”‚             â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                             â”‚                              â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚                    â”‚  JWT Middleware â”‚                     â”‚
â”‚                    â”‚   (Verify Token)â”‚                     â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                             â”‚                              â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚                    â”‚ Prisma ORM      â”‚                     â”‚
â”‚                    â”‚ - Type Safety   â”‚                     â”‚
â”‚                    â”‚ - Query Builder â”‚                     â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚ SQL Queries
                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     POSTGRESQL DATABASE                      â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  User   â”‚  â”‚ Project  â”‚  â”‚  File  â”‚  â”‚   Template   â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ id      â”‚  â”‚ id       â”‚  â”‚ id     â”‚  â”‚ id           â”‚  â”‚
â”‚  â”‚ email   â”‚  â”‚ userId   â”‚  â”‚ projId â”‚  â”‚ name         â”‚  â”‚
â”‚  â”‚ passHashâ”‚  â”‚ name     â”‚  â”‚ path   â”‚  â”‚ category     â”‚  â”‚
â”‚  â”‚ tokens  â”‚  â”‚ struct   â”‚  â”‚ contentâ”‚  â”‚ files (JSON) â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Browser â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1. POST /api/auth/register
     â”‚    { email, password }
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Route  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2. Hash     â”‚
â”‚  password   â”‚
â”‚             â”‚
â”‚ 3. Create   â”‚
â”‚  user in DB â”‚
â”‚             â”‚
â”‚ 4. Generate â”‚
â”‚  JWT token  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 5. Return { user, token }
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Browser â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 6. Store â”‚
â”‚  token inâ”‚
â”‚ localStorageâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Subsequent Requests:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Browser â”‚â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
              â”‚ Headers: { Authorization: "Bearer <token>" }
              â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ API Route   â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚ 1. Extract  â”‚
         â”‚  token      â”‚
         â”‚             â”‚
         â”‚ 2. Verify   â”‚
         â”‚  JWT        â”‚
         â”‚             â”‚
         â”‚ 3. Get user â”‚
         â”‚  from token â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ File Management Flow

```
User clicks file in tree
         â”‚
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ FileTree    â”‚ Check if tab already open?
    â”‚ Component   â”‚ â”€â”€Yesâ†’ Switch to tab
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚ No
           â†“
    Check if file exists in database?
           â”‚
           â”œâ”€Yesâ”€â†’ Load from database
           â”‚       â”‚
           â”‚       â†“
           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  â”‚ GET /api/    â”‚
           â”‚  â”‚ projects/:id/â”‚
           â”‚  â”‚ files/:fileIdâ”‚
           â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚         â”‚
           â”‚         â†“
           â”‚  Return { content }
           â”‚         â”‚
           â””â”€Noâ”€â”€â†’   â”‚
                     â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ POST /api/   â”‚
              â”‚ projects/:id/â”‚
              â”‚ files        â”‚
              â”‚ { path,      â”‚
              â”‚   content:"" }â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
              Create in database
                     â”‚
                     â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Open new tab â”‚
              â”‚ with Monaco  â”‚
              â”‚ Editor       â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        User edits content
                     â”‚
                     â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Mark tab as  â”‚
              â”‚ dirty (â€¢)    â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        User clicks Save
                     â”‚
                     â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ PUT /api/    â”‚
              â”‚ projects/:id/â”‚
              â”‚ files/:fileIdâ”‚
              â”‚ { content }  â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
              Update database
                     â”‚
                     â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Mark tab as  â”‚
              â”‚ clean        â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ Component Hierarchy

```
app/ide/[id]/page.tsx (IDE Page)
â”‚
â”œâ”€ TopBar
â”‚  â”œâ”€ MenuButton (â† Back to projects)
â”‚  â”œâ”€ ProjectName
â”‚  â”œâ”€ SaveButton
â”‚  â”œâ”€ RunButton (Future)
â”‚  â””â”€ SettingsButton
â”‚
â”œâ”€ MainLayout (flex row)
â”‚  â”‚
â”‚  â”œâ”€ Sidebar (w-64)
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ FileTree
â”‚  â”‚     â””â”€ TreeNode (recursive)
â”‚  â”‚        â”œâ”€ Icon (Folder/File)
â”‚  â”‚        â”œâ”€ Name
â”‚  â”‚        â””â”€ Children[]
â”‚  â”‚           â””â”€ TreeNode
â”‚  â”‚              â””â”€ TreeNode...
â”‚  â”‚
â”‚  â””â”€ EditorArea (flex-1)
â”‚     â”‚
â”‚     â”œâ”€ EditorTabs
â”‚     â”‚  â””â”€ Tab[]
â”‚     â”‚     â”œâ”€ Name
â”‚     â”‚     â”œâ”€ DirtyIndicator (â€¢)
â”‚     â”‚     â””â”€ CloseButton (Ã—)
â”‚     â”‚
â”‚     â””â”€ CodeEditor
â”‚        â””â”€ Monaco Editor
â”‚           â”œâ”€ Line Numbers
â”‚           â”œâ”€ Syntax Highlighting
â”‚           â”œâ”€ Minimap
â”‚           â””â”€ Autocomplete
```

---

## ğŸ’¾ State Management

```
IDE Page State
â”œâ”€ project: ProjectData | null
â”‚  â”œâ”€ id
â”‚  â”œâ”€ name
â”‚  â”œâ”€ description
â”‚  â”œâ”€ structure (JSON)
â”‚  â””â”€ files[]
â”‚
â”œâ”€ fileTree: FileNode[]
â”‚  â””â”€ FileNode
â”‚     â”œâ”€ id
â”‚     â”œâ”€ name
â”‚     â”œâ”€ type (file/folder)
â”‚     â”œâ”€ path
â”‚     â””â”€ children[]
â”‚
â”œâ”€ openTabs: EditorTab[]
â”‚  â””â”€ EditorTab
â”‚     â”œâ”€ id (fileId)
â”‚     â”œâ”€ title
â”‚     â”œâ”€ path
â”‚     â””â”€ isDirty (boolean)
â”‚
â”œâ”€ activeTab: string | undefined
â”‚
â”œâ”€ fileContents: Map<fileId, content>
â”‚
â””â”€ loading, saving (booleans)
```

---

## ğŸ” Security Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Request â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Extract Token    â”‚ Headers["Authorization"]
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Verify JWT       â”‚ jose.jwtVerify(token, secret)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€ Valid â”€â”€â†’ Continue
       â”‚
       â””â”€ Invalid â”€â†’ Return 401 Unauthorized

After verification:
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Extract User ID  â”‚ payload.userId
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check Resource   â”‚ project.userId === user.userId
â”‚ Ownership        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€ Authorized â”€â”€â†’ Continue
       â”‚
       â””â”€ Not Owned â”€â”€â”€â†’ Return 403 Forbidden
```

---

## ğŸš€ Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            GitHub Repository            â”‚
â”‚  - Source code                          â”‚
â”‚  - Configuration files                  â”‚
â”‚  - Database schema                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ git push
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Vercel (Auto Deploy)           â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Build Process                 â”‚   â”‚
â”‚  â”‚  1. npm install                â”‚   â”‚
â”‚  â”‚  2. prisma generate            â”‚   â”‚
â”‚  â”‚  3. next build                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Production Server              â”‚   â”‚
â”‚  â”‚  - Next.js API Routes          â”‚   â”‚
â”‚  â”‚  - Static Assets               â”‚   â”‚
â”‚  â”‚  - Edge Functions              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  Environment Variables:                â”‚
â”‚  - DATABASE_URL                        â”‚
â”‚  - NEXTAUTH_SECRET                     â”‚
â”‚  - NEXTAUTH_URL                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ Prisma Client
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Cloud Database (Supabase/Neon)   â”‚
â”‚  - PostgreSQL                          â”‚
â”‚  - Automatic backups                   â”‚
â”‚  - SSL connections                     â”‚
â”‚  - Connection pooling                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Users access via:
https://your-app.vercel.app
```

---

## ğŸ“Š Data Flow Example: Editing a File

```
1. User clicks "PlayerService/init.lua" in file tree

2. FileTree Component
   â”œâ”€ Checks if tab already open
   â””â”€ If not, calls onFileSelect(file)

3. IDE Page Handler
   â”œâ”€ Finds file in project.files by path
   â”œâ”€ If found: Gets content from database
   â””â”€ If not: Creates new file with empty content

4. Create Tab
   â”œâ”€ Add to openTabs array
   â”œâ”€ Set as activeTab
   â””â”€ Load content into fileContents Map

5. Monaco Editor
   â”œâ”€ Receives content via props
   â”œâ”€ Displays with syntax highlighting
   â””â”€ User starts typing...

6. On Change Handler
   â”œâ”€ Updates fileContents Map
   â””â”€ Marks tab as dirty (isDirty: true)

7. User Clicks Save Button
   â”œâ”€ Gets content from fileContents
   â”œâ”€ Makes PUT request to API
   â””â”€ Waits for response...

8. API Route
   â”œâ”€ Verifies JWT token
   â”œâ”€ Checks file ownership
   â”œâ”€ Updates database with new content
   â””â”€ Returns success

9. Success Handler
   â”œâ”€ Marks tab as clean (isDirty: false)
   â””â”€ Shows success indicator
```

---

## ğŸ¯ Future Architecture (Phases 2-7)

```
Current (Phase 1):
Browser â†â†’ Next.js API â†â†’ PostgreSQL

Phase 3 (AI):
Browser â†â†’ Next.js API â†â†’ PostgreSQL
               â†“
        Claude/GPT-4 API

Phase 4 (Templates):
Browser â†â†’ Next.js API â†â†’ PostgreSQL
               â†“
        Vector Database (Pinecone)

Phase 5 (Roblox):
Browser â†â†’ Next.js API â†â†’ PostgreSQL
               â†“              â†“
        Roblox Plugin    WebSocket Server

Phase 6 (Marketplace):
Browser â†â†’ Next.js API â†â†’ PostgreSQL
               â†“              â†“
           Stripe API    S3 Storage
```

---

These diagrams help visualize how SuperbulletAI works under the hood! ğŸš€
